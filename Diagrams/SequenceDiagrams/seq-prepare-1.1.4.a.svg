<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="966px" preserveAspectRatio="none" style="width:2020px;height:966px;" version="1.1" viewBox="0 0 2020 966" width="2020px" zoomAndPan="magnify"><defs><filter height="300%" id="f4esg9w4hob68" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="508" x="756.5" y="23.5352">1.1.4.a. Send notification to Participant (Payer/Payee) (single message)</text><rect fill="#D3D3D3" height="921.4063" style="stroke: #A80036; stroke-width: 1.0;" width="179" x="4" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="7" y="47.0566">Financial Service Provider</text><rect fill="#ADD8E6" height="921.4063" style="stroke: #A80036; stroke-width: 1.0;" width="241" x="659" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="701" y="47.0566">ML API Adapter Service</text><rect fill="#FFFFE0" height="921.4063" style="stroke: #A80036; stroke-width: 1.0;" width="1068" x="920" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="1403.5" y="47.0566">Central Service</text><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="679.1426" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="774.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="992.5" y="209.3965"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="198.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1281.5" y="293.0176"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="210.4844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1281.5" y="543.502"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="140.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1485.5" y="322.3281"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="121.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1608" y="588.123"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1931" y="617.4336"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="665.1426" style="stroke: #000000; stroke-width: 2.0;" width="1964" x="44" y="170.7754"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="245.4844" style="stroke: #000000; stroke-width: 2.0;" width="900" x="653" y="254.3965"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="93" x2="93" y1="153.7754" y2="852.918"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="779" x2="779" y1="153.7754" y2="852.918"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="997" x2="997" y1="153.7754" y2="852.918"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1286.5" x2="1286.5" y1="153.7754" y2="852.918"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1490" x2="1490" y1="153.7754" y2="852.918"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1613" x2="1613" y1="153.7754" y2="852.918"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1936" x2="1936" y1="153.7754" y2="852.918"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="64" y="134.334">DFSP(n)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="54" y="150.8223">Participant</text><ellipse cx="93.5" cy="63.7988" fill="#FEFECE" filter="url(#f4esg9w4hob68)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M93.5,71.7988 L93.5,98.7988 M80.5,79.7988 L106.5,79.7988 M93.5,98.7988 L80.5,113.7988 M93.5,98.7988 L106.5,113.7988 " fill="none" filter="url(#f4esg9w4hob68)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="64" y="865.4531">DFSP(n)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="54" y="881.9414">Participant</text><ellipse cx="93.5" cy="894.8945" fill="#FEFECE" filter="url(#f4esg9w4hob68)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M93.5,902.8945 L93.5,929.8945 M80.5,910.8945 L106.5,910.8945 M93.5,929.8945 L80.5,944.8945 M93.5,929.8945 L106.5,944.8945 " fill="none" filter="url(#f4esg9w4hob68)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="663" y="150.8223">ML API Notification Event Handler</text><ellipse cx="779.5" cy="121.2871" fill="#FEFECE" filter="url(#f4esg9w4hob68)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="775.5,109.2871,781.5,104.2871,779.5,109.2871,781.5,114.2871,775.5,109.2871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="663" y="865.4531">ML API Notification Event Handler</text><ellipse cx="779.5" cy="884.4063" fill="#FEFECE" filter="url(#f4esg9w4hob68)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="775.5,872.4063,781.5,867.4063,779.5,872.4063,781.5,877.4063,775.5,872.4063" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f4esg9w4hob68)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="928" y="114.2871"/><rect fill="#FEFECE" filter="url(#f4esg9w4hob68)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="924" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="931" y="138.8223">Notification-Topic</text><rect fill="#FEFECE" filter="url(#f4esg9w4hob68)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="928" y="851.918"/><rect fill="#FEFECE" filter="url(#f4esg9w4hob68)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="924" y="855.918"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="931" y="876.4531">Notification-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1219.5" y="150.8223">Central Service API</text><path d="M1266,109.2871 L1266,133.2871 M1266,121.2871 L1283,121.2871 " fill="none" filter="url(#f4esg9w4hob68)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1295" cy="121.2871" fill="#FEFECE" filter="url(#f4esg9w4hob68)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1219.5" y="865.4531">Central Service API</text><path d="M1266,872.4063 L1266,896.4063 M1266,884.4063 L1283,884.4063 " fill="none" filter="url(#f4esg9w4hob68)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1295" cy="884.4063" fill="#FEFECE" filter="url(#f4esg9w4hob68)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f4esg9w4hob68)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1442" y="114.2871"/><rect fill="#FEFECE" filter="url(#f4esg9w4hob68)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1438" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1445" y="138.8223">Event-Topic</text><rect fill="#FEFECE" filter="url(#f4esg9w4hob68)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1442" y="851.918"/><rect fill="#FEFECE" filter="url(#f4esg9w4hob68)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1438" y="855.918"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1445" y="876.4531">Event-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="1553" y="150.8223">Notification DAO</text><ellipse cx="1613" cy="121.2871" fill="#FEFECE" filter="url(#f4esg9w4hob68)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="1625" y1="135.2871" y2="135.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="1553" y="865.4531">Notification DAO</text><ellipse cx="1613" cy="884.4063" fill="#FEFECE" filter="url(#f4esg9w4hob68)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="1625" y1="898.4063" y2="898.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1888" y="150.8223">Central Store</text><path d="M1918,101.2871 C1918,91.2871 1936,91.2871 1936,91.2871 C1936,91.2871 1954,91.2871 1954,101.2871 L1954,127.2871 C1954,137.2871 1936,137.2871 1936,137.2871 C1936,137.2871 1918,137.2871 1918,127.2871 L1918,101.2871 " fill="#FEFECE" filter="url(#f4esg9w4hob68)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1918,101.2871 C1918,111.2871 1936,111.2871 1936,111.2871 C1936,111.2871 1954,111.2871 1954,101.2871 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1888" y="865.4531">Central Store</text><path d="M1918,878.4063 C1918,868.4063 1936,868.4063 1936,868.4063 C1936,868.4063 1954,868.4063 1954,878.4063 L1954,904.4063 C1954,914.4063 1936,914.4063 1936,914.4063 C1936,914.4063 1918,914.4063 1918,904.4063 L1918,878.4063 " fill="#FEFECE" filter="url(#f4esg9w4hob68)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1918,878.4063 C1918,888.4063 1936,888.4063 1936,888.4063 C1936,888.4063 1954,888.4063 1954,878.4063 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="679.1426" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="774.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="992.5" y="209.3965"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="198.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1281.5" y="293.0176"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="210.4844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1281.5" y="543.502"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="140.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1485.5" y="322.3281"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="121.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1608" y="588.123"/><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1931" y="617.4336"/><path d="M44,170.7754 L296,170.7754 L296,177.7754 L286,187.7754 L44,187.7754 L44,170.7754 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="665.1426" style="stroke: #000000; stroke-width: 2.0;" width="1964" x="44" y="170.7754"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="207" x="59" y="184.3438">Send notification to Participant</text><polygon fill="#A80036" points="980.5,205.3965,990.5,209.3965,980.5,213.3965,984.5,209.3965" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="784.5" x2="986.5" y1="209.3965" y2="209.3965"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="791.5" y="204.6543">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="804.5" y="204.6543">Consume Notification event</text><path d="M653,254.3965 L868,254.3965 L868,261.3965 L858,271.3965 L653,271.3965 L653,254.3965 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="245.4844" style="stroke: #000000; stroke-width: 2.0;" width="900" x="653" y="254.3965"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="668" y="267.9648">Persist Event Information</text><polygon fill="#A80036" points="1269.5,289.0176,1279.5,293.0176,1269.5,297.0176,1273.5,293.0176" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="784.5" x2="1275.5" y1="293.0176" y2="293.0176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="791.5" y="288.2754">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="342" x="804.5" y="288.2754">Request to persist event information - POST - /events</text><polygon fill="#A80036" points="1473.5,318.3281,1483.5,322.3281,1473.5,326.3281,1477.5,322.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1291.5" x2="1479.5" y1="322.3281" y2="322.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1298.5" y="317.5859">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="1311.5" y="317.5859">Publish event information</text><rect fill="#FFFFFF" filter="url(#f4esg9w4hob68)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="210" x="1435" y="355.3281"/><polygon fill="#EEEEEE" points="1435,355.3281,1499,355.3281,1499,362.3281,1489,372.3281,1435,372.3281,1435,355.3281" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1448" y="369.8965">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="1441" y="388.8965">Event Handler Consume {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-event-9.1.0.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-event-9.1.0.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="36" x="1599" y="388.8965">9.1.0.</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="1599" x2="1635" y1="390.8965" y2="390.8965"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1635" y="388.8965">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1445" y="404.207"/><polygon fill="#A80036" points="1302.5,458.5703,1292.5,462.5703,1302.5,466.5703,1298.5,462.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1296.5" x2="1489.5" y1="462.5703" y2="462.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1308.5" y="457.8281">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="1321.5" y="457.8281">Return success</text><polygon fill="#A80036" points="795.5,487.8809,785.5,491.8809,795.5,495.8809,791.5,491.8809" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="789.5" x2="1285.5" y1="491.8809" y2="491.8809"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="801.5" y="487.1387">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="814.5" y="487.1387">Return success</text><polygon fill="#A80036" points="1269.5,539.502,1279.5,543.502,1269.5,547.502,1273.5,543.502" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="784.5" x2="1275.5" y1="543.502" y2="543.502"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="791.5" y="531.1045">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="465" x="804.5" y="523.4492">Request Notification details for Participant - GET - /notifications/DFSP(n)</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="804.5" y="538.7598">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="881.5" y="538.7598">2003</text><polygon fill="#A80036" points="1596,584.123,1606,588.123,1596,592.123,1600,588.123" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1291.5" x2="1602" y1="588.123" y2="588.123"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1298.5" y="575.7256">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="1311.5" y="568.0703">Fetch Notification details for Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="1311.5" y="583.3809">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1388.5" y="583.3809">2003</text><polygon fill="#A80036" points="1919,613.4336,1929,617.4336,1919,621.4336,1923,617.4336" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1618" x2="1925" y1="617.4336" y2="617.4336"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1625" y="612.6914">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="1638" y="612.6914">Fetch Notification details for Participant</text><polygon fill="#FFFFE0" filter="url(#f4esg9w4hob68)" points="1884,630.4336,1988,630.4336,1998,641.4336,1988,653.4336,1884,653.4336,1874,641.4336,1884,630.4336" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="1886" y="647.002">transferPosition</text><polygon fill="#A80036" points="1629,676.0547,1619,680.0547,1629,684.0547,1625,680.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1623" x2="1935" y1="680.0547" y2="680.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1635" y="675.3125">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="1648" y="675.3125">Retrieved Notification details for Participant</text><polygon fill="#A80036" points="1302.5,705.3652,1292.5,709.3652,1302.5,713.3652,1298.5,709.3652" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1296.5" x2="1612" y1="709.3652" y2="709.3652"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1308.5" y="704.623">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="1330.5" y="704.623">Return Notification details for Participant</text><polygon fill="#A80036" points="795.5,749.9863,785.5,753.9863,795.5,757.9863,791.5,753.9863" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="789.5" x2="1285.5" y1="753.9863" y2="753.9863"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="801.5" y="741.5889">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="823.5" y="733.9336">Return Notification details for Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="823.5" y="749.2441">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="907.5" y="749.2441">3202, 3203</text><polygon fill="#A80036" points="104.5,794.6074,94.5,798.6074,104.5,802.6074,100.5,798.6074" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="98.5" x2="773.5" y1="798.6074" y2="798.6074"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="110.5" y="786.21">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="589" x="132.5" y="778.5547">Callback with Prepare result to Participant to specified URL - PUT - /&lt;dfsp-host&gt;&gt;/transfers</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="132.5" y="793.8652">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="209.5" y="793.8652">1001</text><polygon fill="#A80036" points="762.5,823.918,772.5,827.918,762.5,831.918,766.5,827.918" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="93.5" x2="768.5" y1="827.918" y2="827.918"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="100.5" y="823.1758">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="122.5" y="823.1758">HTTP 200 OK</text><!--
@startuml
title 1.1.4.a. Send notification to Participant (Payer/Payee) (single message)

autonumber


actor "DFSP(n)\nParticipant" as DFSP
control "ML API Notification Event Handler" as NOTIFY_HANDLER
boundary "Central Service API" as CSAPI
collections "Notification-Topic" as TOPIC_NOTIFICATIONS
collections "Event-Topic" as TOPIC_EVENTS
entity "Notification DAO" as NOTIFY_DAO
database "Central Store" as DB

box "Financial Service Provider" #lightGray
	participant DFSP
end box

box "ML API Adapter Service" #LightBlue
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
participant TOPIC_NOTIFICATIONS
    participant CSAPI
    participant TOPIC_EVENTS
    participant NOTIFY_DAO
    participant DB
end box

activate NOTIFY_HANDLER
group Send notification to Participant
    TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume Notification event
    activate TOPIC_NOTIFICATIONS
    deactivate TOPIC_NOTIFICATIONS

    group Persist Event Information
        NOTIFY_HANDLER -> CSAPI: Request to persist event information - POST - /events
        activate CSAPI
        CSAPI -> TOPIC_EVENTS: Publish event information
        activate TOPIC_EVENTS
        |||
        ref over TOPIC_EVENTS :  Event Handler Consume {[[https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-event-9.1.0.svg 9.1.0.]]} \n
        |||
        TOPIC_EVENTS - -> CSAPI: Return success
        deactivate TOPIC_EVENTS
        CSAPI - -> NOTIFY_HANDLER: Return success
        deactivate CSAPI
    end
    NOTIFY_HANDLER -> CSAPI: Request Notification details for Participant - GET - /notifications/DFSP(n)\n<color #FF0000><b>Error code:</b> 2003</color>
    activate CSAPI
    CSAPI -> NOTIFY_DAO: Fetch Notification details for Participant\n<color #FF0000><b>Error code:</b> 2003</color>
    activate NOTIFY_DAO
    NOTIFY_DAO -> DB: Fetch Notification details for Participant
    activate DB
    hnote over DB #lightyellow
        transferPosition
    end note
    DB -> NOTIFY_DAO: Retrieved Notification details for Participant
    deactivate DB
    NOTIFY_DAO - -> CSAPI: Return Notification details for Participant
    deactivate NOTIFY_DAO
    CSAPI - -> NOTIFY_HANDLER: Return Notification details for Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
    deactivate CSAPI
    NOTIFY_HANDLER -> DFSP: Callback with Prepare result to Participant to specified URL - PUT - /<dfsp-host>>/transfers\n<color #FF0000><b>Error code:</b> 1001</color>
    NOTIFY_HANDLER <- - DFSP: HTTP 200 OK 
end
deactivate NOTIFY_HANDLER
@enduml

PlantUML version 1.2018.05(Sat May 05 23:00:17 EEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>