<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1006px" preserveAspectRatio="none" style="width:1523px;height:1006px;" version="1.1" viewBox="0 0 1523 1006" width="1523px" zoomAndPan="magnify"><defs><filter height="300%" id="f12ycdwsvye2rj" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="678.5" y="23.5352">2.3.0. Transfer Timeout</text><rect fill="#D3D3D3" height="960.6719" style="stroke: #A80036; stroke-width: 1.0;" width="186" x="4" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="7" y="47.0566">Financial Service Providers</text><rect fill="#ADD8E6" height="960.6719" style="stroke: #A80036; stroke-width: 1.0;" width="361" x="192" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="294" y="47.0566">ML API Adapter Service</text><rect fill="#FFFFE0" height="960.6719" style="stroke: #A80036; stroke-width: 1.0;" width="941" x="555" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="975" y="47.0566">Central Service</text><rect fill="#FFFFFF" filter="url(#f12ycdwsvye2rj)" height="718.4082" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="427.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f12ycdwsvye2rj)" height="718.4082" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="645.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f12ycdwsvye2rj)" height="718.4082" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1250" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f12ycdwsvye2rj)" height="704.4082" style="stroke: #000000; stroke-width: 2.0;" width="1489" x="23" y="170.7754"/><rect fill="#FFFFFF" filter="url(#f12ycdwsvye2rj)" height="210.4395" style="stroke: #000000; stroke-width: 2.0;" width="953" x="549" y="281.0176"/><rect fill="#FFFFFF" height="163.8184" style="stroke: none; stroke-width: 1.0;" width="953" x="549" y="327.6387"/><rect fill="#FFFFFF" filter="url(#f12ycdwsvye2rj)" height="132.5527" style="stroke: #000000; stroke-width: 2.0;" width="1469" x="33" y="534.7676"/><rect fill="#FFFFFF" filter="url(#f12ycdwsvye2rj)" height="132.5527" style="stroke: #000000; stroke-width: 2.0;" width="1410" x="92" y="735.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="67" x2="67" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="126" x2="126" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="251" x2="251" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="432" x2="432" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="650" x2="650" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="901" x2="901" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1112" x2="1112" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1255" x2="1255" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1418" x2="1418" y1="153.7754" y2="892.1836"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="43" y="134.334">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="46" y="150.8223">Payer</text><ellipse cx="67.5" cy="63.7988" fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M67.5,71.7988 L67.5,98.7988 M54.5,79.7988 L80.5,79.7988 M67.5,98.7988 L54.5,113.7988 M67.5,98.7988 L80.5,113.7988 " fill="none" filter="url(#f12ycdwsvye2rj)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="43" y="904.7188">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="46" y="921.207">Payer</text><ellipse cx="67.5" cy="934.1602" fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M67.5,942.1602 L67.5,969.1602 M54.5,950.1602 L80.5,950.1602 M67.5,969.1602 L54.5,984.1602 M67.5,969.1602 L80.5,984.1602 " fill="none" filter="url(#f12ycdwsvye2rj)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="102" y="134.334">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="104" y="150.8223">Payee</text><ellipse cx="126.5" cy="63.7988" fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M126.5,71.7988 L126.5,98.7988 M113.5,79.7988 L139.5,79.7988 M126.5,98.7988 L113.5,113.7988 M126.5,98.7988 L139.5,113.7988 " fill="none" filter="url(#f12ycdwsvye2rj)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="102" y="904.7188">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="104" y="921.207">Payee</text><ellipse cx="126.5" cy="934.1602" fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M126.5,942.1602 L126.5,969.1602 M113.5,950.1602 L139.5,950.1602 M126.5,969.1602 L113.5,984.1602 M126.5,969.1602 L139.5,984.1602 " fill="none" filter="url(#f12ycdwsvye2rj)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="196" y="150.8223">ML API Adapter</text><path d="M230.5,109.2871 L230.5,133.2871 M230.5,121.2871 L247.5,121.2871 " fill="none" filter="url(#f12ycdwsvye2rj)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="259.5" cy="121.2871" fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="196" y="904.7188">ML API Adapter</text><path d="M230.5,911.6719 L230.5,935.6719 M230.5,923.6719 L247.5,923.6719 " fill="none" filter="url(#f12ycdwsvye2rj)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="259.5" cy="923.6719" fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="316" y="150.8223">ML API Notification Event Handler</text><ellipse cx="432.5" cy="121.2871" fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="428.5,109.2871,434.5,104.2871,432.5,109.2871,434.5,114.2871,428.5,109.2871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="316" y="904.7188">ML API Notification Event Handler</text><ellipse cx="432.5" cy="923.6719" fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="428.5,911.6719,434.5,906.6719,432.5,911.6719,434.5,916.6719,428.5,911.6719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="559" y="150.8223">Transfer Timeout Handler</text><ellipse cx="650.5" cy="121.2871" fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="646.5,109.2871,652.5,104.2871,650.5,109.2871,652.5,114.2871,646.5,109.2871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="559" y="904.7188">Transfer Timeout Handler</text><ellipse cx="650.5" cy="923.6719" fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="646.5,911.6719,652.5,906.6719,650.5,911.6719,652.5,916.6719,646.5,911.6719" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="290" x="756" y="114.2871"/><rect fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="290" x="752" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="276" x="759" y="138.8223">Topic-{currency}-DFSPn-Position-Abort</text><rect fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="290" x="756" y="891.1836"/><rect fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="290" x="752" y="895.1836"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="276" x="759" y="915.7188">Topic-{currency}-DFSPn-Position-Abort</text><rect fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1064" y="114.2871"/><rect fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1060" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1067" y="138.8223">Event-Topic</text><rect fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1064" y="891.1836"/><rect fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1060" y="895.1836"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1067" y="915.7188">Event-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="154" x="1175" y="150.8223">Position Event Handler</text><ellipse cx="1255" cy="121.2871" fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1251,109.2871,1257,104.2871,1255,109.2871,1257,114.2871,1251,109.2871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="154" x="1175" y="904.7188">Position Event Handler</text><ellipse cx="1255" cy="923.6719" fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1251,911.6719,1257,906.6719,1255,911.6719,1257,916.6719,1251,911.6719" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1349" y="114.2871"/><rect fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1345" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1352" y="138.8223">Notification-Topic</text><rect fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1349" y="891.1836"/><rect fill="#FEFECE" filter="url(#f12ycdwsvye2rj)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1345" y="895.1836"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1352" y="915.7188">Notification-Topic</text><rect fill="#FFFFFF" filter="url(#f12ycdwsvye2rj)" height="718.4082" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="427.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f12ycdwsvye2rj)" height="718.4082" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="645.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f12ycdwsvye2rj)" height="718.4082" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1250" y="163.7754"/><path d="M23,170.7754 L173,170.7754 L173,177.7754 L163,187.7754 L23,187.7754 L23,170.7754 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="704.4082" style="stroke: #000000; stroke-width: 2.0;" width="1489" x="23" y="170.7754"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="38" y="184.3438">Transfer Expiry</text><rect fill="#FFFFFF" filter="url(#f12ycdwsvye2rj)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="608" x="556" y="213.0859"/><polygon fill="#EEEEEE" points="556,213.0859,620,213.0859,620,220.0859,610,230.0859,556,230.0859,556,213.0859" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="569" y="227.6543">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="752" y="246.6543">Timeout Handler Consume {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-timeout-2.3.1.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-timeout-2.3.1.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="36" x="928" y="246.6543">2.3.1.</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="928" x2="964" y1="248.6543" y2="248.6543"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="964" y="246.6543">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="756" y="261.9648"/><path d="M549,281.0176 L611,281.0176 L611,288.0176 L601,298.0176 L549,298.0176 L549,281.0176 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="210.4395" style="stroke: #000000; stroke-width: 2.0;" width="953" x="549" y="281.0176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="564" y="294.5859">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="626" y="293.6523">[transferStateId == 'RECEIVED_PREPARE']</text><polygon fill="#A80036" points="1406.5,315.3281,1416.5,319.3281,1406.5,323.3281,1410.5,319.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="655.5" x2="1412.5" y1="319.3281" y2="319.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="662.5" y="314.8965">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="675.5" y="314.8965">Produce message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="549" x2="1502" y1="328.6387" y2="328.6387"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="181" x="554" y="339.2734">[transferStateId == 'RESERVED']</text><polygon fill="#A80036" points="889,359.5938,899,363.5938,889,367.5938,893,363.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="655.5" x2="895" y1="363.5938" y2="363.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="662.5" y="359.1621">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="675.5" y="359.1621">Produce message</text><polygon fill="#A80036" points="912,388.9043,902,392.9043,912,396.9043,908,392.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="906" x2="1249" y1="392.9043" y2="392.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="918" y="388.4727">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="931" y="388.4727">Consume message</text><rect fill="#FFFFFF" filter="url(#f12ycdwsvye2rj)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="742" x="749" y="401.2148"/><polygon fill="#EEEEEE" points="749,401.2148,813,401.2148,813,408.2148,803,418.2148,749,418.2148,749,401.2148" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="762" y="415.7832">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="904" y="434.7832">Position Handler Consume (Timeout) {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-position-1.3.3-abort.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-position-1.3.3-abort.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="189" x="1143" y="434.7832">seq-position-1.3.3-abort.svg</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="1143" x2="1332" y1="436.7832" y2="436.7832"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1332" y="434.7832">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="908" y="450.0938"/><polygon fill="#A80036" points="1406.5,479.1465,1416.5,483.1465,1406.5,487.1465,1410.5,483.1465" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1260" x2="1412.5" y1="483.1465" y2="483.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1267" y="478.7148">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="1280" y="478.7148">Produce message</text><polygon fill="#A80036" points="1406.5,515.457,1416.5,519.457,1406.5,523.457,1410.5,519.457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="437.5" x2="1412.5" y1="519.457" y2="519.457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="444.5" y="515.0254">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="457.5" y="515.0254">Consume message</text><path d="M33,534.7676 L100,534.7676 L100,541.7676 L90,551.7676 L33,551.7676 L33,534.7676 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="132.5527" style="stroke: #000000; stroke-width: 2.0;" width="1469" x="33" y="534.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="48" y="548.3359">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="284" x="115" y="547.4023">[action IN ['timeout-received', 'timeout-reserved']]</text><rect fill="#FFFFFF" filter="url(#f12ycdwsvye2rj)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="1451" x="40" y="577.0781"/><polygon fill="#EEEEEE" points="40,577.0781,104,577.0781,104,584.0781,94,594.0781,40,594.0781,40,577.0781" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="53" y="591.6465">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="616" y="610.6465">Send notification to Participant (Payer) {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-prepare-1.1.4.a.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-prepare-1.1.4.a.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="47" x="864" y="610.6465">1.1.4.a.</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="864" x2="911" y1="612.6465" y2="612.6465"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="911" y="610.6465">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="620" y="625.957"/><polygon fill="#A80036" points="78.5,655.0098,68.5,659.0098,78.5,663.0098,74.5,659.0098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="72.5" x2="426.5" y1="659.0098" y2="659.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="84.5" y="654.5781">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="97.5" y="654.5781">Send callback notification</text><polygon fill="#A80036" points="1406.5,716.3203,1416.5,720.3203,1406.5,724.3203,1410.5,720.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="437.5" x2="1412.5" y1="720.3203" y2="720.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="444.5" y="715.8887">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="457.5" y="715.8887">Consume message</text><path d="M92,735.6309 L159,735.6309 L159,742.6309 L149,752.6309 L92,752.6309 L92,735.6309 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="132.5527" style="stroke: #000000; stroke-width: 2.0;" width="1410" x="92" y="735.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="107" y="749.1992">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="174" y="748.2656">[action == 'timeout-reserved']</text><rect fill="#FFFFFF" filter="url(#f12ycdwsvye2rj)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="1392" x="99" y="777.9414"/><polygon fill="#EEEEEE" points="99,777.9414,163,777.9414,163,784.9414,153,794.9414,99,794.9414,99,777.9414" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="112" y="792.5098">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="644.5" y="811.5098">Send notification to Participant (Payee) {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-prepare-1.1.4.a.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-prepare-1.1.4.a.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="47" x="894.5" y="811.5098">1.1.4.a.</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="894.5" x2="941.5" y1="813.5098" y2="813.5098"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="941.5" y="811.5098">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="648.5" y="826.8203"/><polygon fill="#A80036" points="137.5,855.873,127.5,859.873,137.5,863.873,133.5,859.873" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="131.5" x2="426.5" y1="859.873" y2="859.873"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="143.5" y="855.4414">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="156.5" y="855.4414">Send callback notification</text><!--
@startuml
title 2.3.0. Transfer Timeout

autonumber


actor "DFSP1\nPayer" as DFSP1
actor "DFSP2\nPayee" as DFSP2
boundary "ML API Adapter" as MLAPI
control "ML API Notification Event Handler" as NOTIFY_HANDLER
control "Transfer Timeout Handler" as EXP_HANDLER
collections "Topic-{currency}-DFSPn-Position-Abort" as TOPIC_POSITION_DFSP
control "Position Event Handler" as POS_HANDLER
collections "Notification-Topic" as TOPIC_NOTIFICATIONS
collections "Event-Topic" as TOPIC_EVENT

box "Financial Service Providers" #lightGray
	participant DFSP1
	participant DFSP2
end box

box "ML API Adapter Service" #LightBlue
	participant MLAPI
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
    participant EXP_HANDLER
    participant TOPIC_POSITION_DFSP
    participant TOPIC_EVENT
    participant POS_HANDLER
    participant TOPIC_NOTIFICATIONS
end box

activate NOTIFY_HANDLER
activate EXP_HANDLER
activate POS_HANDLER
group Transfer Expiry
    |||
    ref over EXP_HANDLER, TOPIC_EVENT :  Timeout Handler Consume {[[https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-timeout-2.3.1.svg 2.3.1.]]} \n
    alt transferStateId == 'RECEIVED_PREPARE'
        EXP_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
    else transferStateId == 'RESERVED'
        EXP_HANDLER -> TOPIC_POSITION_DFSP: Produce message
        TOPIC_POSITION_DFSP <- POS_HANDLER: Consume message
        ref over TOPIC_POSITION_DFSP, TOPIC_NOTIFICATIONS :  Position Handler Consume (Timeout) {[[https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-position-1.3.3-abort.svg seq-position-1.3.3-abort.svg]]} \n
        POS_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
    end
    TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume message
    opt action IN ['timeout-received', 'timeout-reserved']
        |||
        ref over DFSP1, TOPIC_NOTIFICATIONS : Send notification to Participant (Payer) {[[https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-prepare-1.1.4.a.svg 1.1.4.a.]]} \n
        NOTIFY_HANDLER -> DFSP1: Send callback notification
    end
    |||
    TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume message
    opt action == 'timeout-reserved'
        |||
        ref over DFSP2, TOPIC_NOTIFICATIONS : Send notification to Participant (Payee) {[[https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-prepare-1.1.4.a.svg 1.1.4.a.]]} \n
        NOTIFY_HANDLER -> DFSP2: Send callback notification
    end
end
deactivate POS_HANDLER
deactivate EXP_HANDLER
deactivate NOTIFY_HANDLER
@enduml

PlantUML version 1.2018.01(Sun Jan 28 20:08:22 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1136-b20
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>